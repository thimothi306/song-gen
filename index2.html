<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="UTF-8" />
  <title>Song Sheet Generator (Telugu - A4)</title>

  <!-- Telugu-friendly font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+Telugu:wght@400;600&display=swap">

  <style>
   * {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  font-family: "Noto Sans Telugu", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: #f3f4f6;
}

.app {
  max-width: 1100px;
  margin: 0 auto;
  padding: 16px;
}

h1 {
  font-size: 24px;
  margin-bottom: 4px;
}

.subtitle {
  font-size: 14px;
  color: #4b5563;
  margin-bottom: 16px;
}

.card {
  background: #ffffff;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
  margin-bottom: 8px;
}

label {
  font-size: 14px;
  font-weight: 500;
}

textarea {
  width: 100%;
  min-height: 220px;
  border-radius: 10px;
  border: 1px solid #d1d5db;
  padding: 10px;
  font-size: 14px;
  font-family: "Noto Sans Telugu", system-ui, sans-serif;
  resize: vertical;
}

textarea:focus,
select:focus {
  outline: none;
  border-color: #2563eb;
  box-shadow: 0 0 0 1px #2563eb33;
}

select,
input[type="number"] {
  border-radius: 8px;
  border: 1px solid #d1d5db;
  padding: 4px 8px;
  font-size: 14px;
}

button {
  border: none;
  border-radius: 999px;
  padding: 8px 16px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  background: #2563eb;
  color: white;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

button:active {
  transform: scale(0.98);
}

.hint {
  font-size: 12px;
  color: #6b7280;
  margin-top: 4px;
}

.preview-wrapper {
  margin-top: 12px;
}

.preview-header {
  margin-bottom: 8px;
  font-size: 13px;
  color: #4b5563;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.preview-box {
  border-radius: 12px;
  background: #e5e7eb;
  padding: 8px;
  overflow: auto;
  max-height: 70vh;
  border: 1px solid #d1d5db;
}

/* PRINT layout ------------------------------------ */
@page {
  size: A4;
  margin: 12mm;
}

@media print {
  body {
    background: white;
  }

  .no-print {
    display: none !important;
  }

  .preview-box {
    border: none;
    padding: 0;
    max-height: none;
    overflow: visible;
    background: white;
  }

  .sheet {
    box-shadow: none;
    margin: 0;
  }
}

/* A4 SHEET FORMATTING */
.sheet {
  background: white;
  padding: 8mm;
  margin: 0 auto 12px;
  min-height: 260mm;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  column-gap: 12mm;
  column-fill: balance;
}

/* Columns switch */
.columns-2 {
  column-count: 2;
}

.columns-1 {
  column-count: 1;
}

/* SONG BLOCK */
.song {
  margin-bottom: 10px;
  padding-bottom: 4px;
  border-bottom: 1px dashed #e5e7eb;
}

/* Title should NEVER split by column break */
.song-title {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 3px;
  break-inside: avoid;
}

.song-body {
  font-size: 12px;
  line-height: 1.35;
  white-space: pre-line;
}

/* Number small style */
.song-number {
  font-size: 11px;
  color: #9ca3af;
  margin-right: 6px;
}

.controls-inline {
  display: inline-flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

  </style>
</head>
<body>
  <div class="app">
    <div class="no-print">
      <h1>Song Sheet Generator</h1>
      <div class="subtitle">
        Telugu ¬∑ Lyrics only ¬∑ A4 ¬∑ Auto layout (2 columns)
      </div>

      <div class="card">
        <div class="row">
          <div style="flex:1 1 200px;">
            <label for="rawInput">Paste all songs here:</label>
          </div>
        </div>

        <textarea id="rawInput" placeholder="‡∞â‡∞¶‡∞æ‡∞π‡∞∞‡∞£:

Yesu Naa Rakshakudu
‡∞≤‡±à‡∞®‡±ç 1
‡∞≤‡±à‡∞®‡±ç 2
‡∞≤‡±à‡∞®‡±ç 3

---
Naa Prabhu Naa Devudu
‡∞≤‡±à‡∞®‡±ç 1
‡∞≤‡±à‡∞®‡±ç 2
"></textarea>

        <div class="hint">
          üëâ ‡∞™‡±ç‡∞∞‡∞§‡∞ø ‡∞™‡∞æ‡∞ü ‡∞Æ‡∞ß‡±ç‡∞Ø‡∞≤‡±ã ‡∞í‡∞ï ‡∞≤‡±à‡∞®‡±ç‚Äå‡∞≤‡±ã <strong>---</strong> (‡∞Æ‡±Ç‡∞°‡±Å ‡∞°‡∞æ‡∞∑‡±ç‚Äå‡∞≤‡±Å) ‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞Ç‡∞°‡∞ø.<br />
          üëâ ‡∞™‡±ç‡∞∞‡∞§‡∞ø ‡∞¨‡±ç‡∞≤‡∞æ‡∞ï‡±ç‚Äå‡∞≤‡±ã <strong>‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞≤‡±à‡∞®‡±ç ‡∞™‡∞æ‡∞ü ‡∞ü‡±à‡∞ü‡∞ø‡∞≤‡±ç</strong> ‡∞ó‡∞æ ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡∞æ‡∞Ç.
        </div>

        <div class="row" style="margin-top:10px;">
          <div class="controls-inline">
            <label for="fontSize">Font size:</label>
            <select id="fontSize">
              <option value="12">Small (12)</option>
              <option value="13" selected>Normal (13)</option>
              <option value="14">Large (14)</option>
            </select>

            <label for="columns">Columns:</label>
            <select id="columns">
              <option value="2" selected>2 columns</option>
              <option value="1">1 column</option>
            </select>
          </div>

          <div style="margin-left:auto;">
            <button id="generateBtn">
              ‚öôÔ∏è Generate Sheets
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="card preview-wrapper">
      <div class="preview-header no-print">
        <div>Preview (what will be printed on A4)</div>
        <div class="controls-inline">
          <button onclick="window.print()">üñ®Ô∏è Print</button>
        </div>
      </div>

      <div class="preview-box">
        <div id="sheetsContainer">
          <!-- Generated content goes here -->
          <div class="sheet columns-2" id="emptyState">
            <div style="font-size:13px; color:#6b7280;">
              ‡∞™‡±à‡∞® ‡∞â‡∞®‡±ç‡∞® ‡∞¨‡∞æ‡∞ï‡±ç‡∞∏‡±ç‚Äå‡∞≤‡±ã ‡∞™‡∞æ‡∞ü‡∞≤‡±Å ‡∞™‡±á‡∞∏‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞∏‡∞ø <b>‚ÄúGenerate Sheets‚Äù</b> ‡∞®‡±ä‡∞ï‡±ç‡∞ï‡∞Ç‡∞°‡∞ø.  
              ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞™‡±ç‡∞∞‡∞ø‡∞Ç‡∞ü‡±ç ‡∞Ö‡∞µ‡±Å‡∞ü‡±ç ‡∞é‡∞≤‡∞æ ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡±ã ‡∞ö‡±Ç‡∞™‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script>
    const rawInput = document.getElementById("rawInput");
    const fontSizeSelect = document.getElementById("fontSize");
    const columnsSelect = document.getElementById("columns");
    const generateBtn = document.getElementById("generateBtn");
    const sheetsContainer = document.getElementById("sheetsContainer");
    const emptyState = document.getElementById("emptyState");

    function clearSheets() {
      while (sheetsContainer.firstChild) {
        sheetsContainer.removeChild(sheetsContainer.firstChild);
      }
    }

    function generateSheets() {
      const text = rawInput.value.trim();
      clearSheets();

      if (!text) {
        sheetsContainer.appendChild(emptyState);
        return;
      }

      const fontSize = parseInt(fontSizeSelect.value, 10) || 13;
      const columns = columnsSelect.value === "1" ? "columns-1" : "columns-2";

      // Songs are separated by a line containing --- (3 or more dashes)
      const rawSongs = text.split(/\n-{3,}\n/g);

      const sheet = document.createElement("div");
      sheet.className = "sheet " + columns;
      sheet.style.fontSize = fontSize + "px";

      rawSongs.forEach((block, index) => {
        const trimmed = block.trim();
        if (!trimmed) return;

        const lines = trimmed.split("\n").map(l => l.trim());
        if (lines.length === 0) return;

        const title = lines[0];
        const bodyLines = lines.slice(1).join("\n");

        const songEl = document.createElement("div");
        songEl.className = "song";

        const titleEl = document.createElement("div");
        titleEl.className = "song-title";

        const numberSpan = document.createElement("span");
        numberSpan.className = "song-number";
        numberSpan.textContent = (index + 1) + ".";

        const titleSpan = document.createElement("span");
        titleSpan.textContent = " " + title;

        titleEl.appendChild(numberSpan);
        titleEl.appendChild(titleSpan);

        const bodyEl = document.createElement("div");
        bodyEl.className = "song-body";
        bodyEl.style.fontSize = fontSize - 1 + "px";
        bodyEl.textContent = bodyLines;

        songEl.appendChild(titleEl);
        songEl.appendChild(bodyEl);

        sheet.appendChild(songEl);
      });

      sheetsContainer.appendChild(sheet);
    }

    generateBtn.addEventListener("click", generateSheets);

    // Optional: live update on change of font/columns
    fontSizeSelect.addEventListener("change", () => {
      if (rawInput.value.trim()) generateSheets();
    });
    columnsSelect.addEventListener("change", () => {
      if (rawInput.value.trim()) generateSheets();
    });
  </script>
</body>
</html>